â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   HÆ¯á»šNG DáºªN FIX Lá»–I SPINE MATERIAL KHI LOAD Tá»ª ASSETBUNDLE    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ MÃ” Táº¢ Váº¤N Äá»€:
-----------------
Khi load LevelData tá»« AssetBundle, SkeletonGraphic (anim) bá»‹ máº¥t material
â†’ Hiá»ƒn thá»‹ mÃ u tÃ­m (magenta) 
â†’ Shader bá»‹ missing hoáº·c reference bá»‹ máº¥t


âœ… GIáº¢I PHÃP - THá»°C HIá»†N THEO THá»¨ Tá»°:
-------------------------------------

BÆ¯á»šC 1: Setup ShaderReferences Asset
------------------------------------
1. Trong Unity Editor, click menu: 
   Tools > Shader > Setup ShaderReferences Asset

2. Kiá»ƒm tra file: Assets/Resources/ShaderReferences.asset
   â†’ Pháº£i cÃ³ Ã­t nháº¥t 1 Spine shader trong danh sÃ¡ch
   
3. Náº¿u cáº§n, báº¡n cÃ³ thá»ƒ thÃªm shader/material thá»§ cÃ´ng:
   - Chá»n ShaderReferences.asset trong Project
   - Trong Inspector, kÃ©o tháº£ shader/material vÃ o list


BÆ¯á»šC 2: ThÃªm Shader vÃ o Always Included Shaders
------------------------------------------------
1. Click menu: 
   Tools > Spine > Add Shaders to Always Included Shaders

2. Hoáº·c thá»§ cÃ´ng:
   - Má»Ÿ: Edit > Project Settings > Graphics
   - Scroll xuá»‘ng "Always Included Shaders"
   - Click [+] vÃ  thÃªm shader:
     Assets/Spine/Runtime/spine-unity/Shaders/SkeletonGraphic/Spine-SkeletonGraphic.shader


BÆ¯á»šC 3: Rebuild AssetBundle
----------------------------
1. XÃ³a AssetBundle cÅ© trong thÆ° má»¥c build
2. Build láº¡i AssetBundle vá»›i LevelData


BÆ¯á»šC 4: Test
-------------
1. Cháº¡y game vÃ  load AssetBundle
2. Kiá»ƒm tra Console log:
   âœ“ [ShaderManager] Load tá»« ShaderReferences: ...
   âœ“ [LevelData] ÄÃ£ táº¡o vÃ  gÃ¡n material má»›i vá»›i shader: ...
   âœ“ [LevelData] ÄÃ£ rebuild SkeletonGraphic

3. Náº¿u váº«n lá»—i, kiá»ƒm tra log Ä‘á»ƒ xem bÆ°á»›c nÃ o fail


ğŸ” DEBUG TOOLS:
---------------
1. In thÃ´ng tin ShaderReferences:
   Tools > Shader > Print ShaderReferences Info

2. Liá»‡t kÃª táº¥t cáº£ Spine shaders:
   Tools > Spine > List All Spine Shaders


ğŸ“ LÆ¯U Ã QUAN TRá»ŒNG:
--------------------
âœ“ ShaderReferences.asset PHáº¢I náº±m trong thÆ° má»¥c Resources
âœ“ Shader PHáº¢I Ä‘Æ°á»£c thÃªm vÃ o Always Included Shaders trÆ°á»›c khi build
âœ“ Sau khi thay Ä‘á»•i, PHáº¢I rebuild AssetBundle
âœ“ ShaderManager sáº½ tá»± Ä‘á»™ng khá»Ÿi táº¡o khi game cháº¡y


ğŸ› ï¸ CÃC FILE LIÃŠN QUAN:
-----------------------
- Assets/Resources/ShaderReferences.asset          (Asset chá»©a shader references)
- Assets/Base/00_BaseCode/Scripts/ShaderReferences.cs   (ScriptableObject)
- Assets/ArtPuzzleFood/Script/Controllers/GamePlayController/ShaderManager.cs
- Assets/ArtPuzzleFood/Script/Controllers/GamePlayController/LevelData.cs
- Assets/Editor/SpineShaderIncluder.cs             (Auto add to build)
- Assets/Editor/ShaderReferencesEditor.cs          (Setup tool)


ğŸ”§ CÃCH HOáº T Äá»˜NG:
------------------
1. ShaderManager khá»Ÿi táº¡o vÃ  load ShaderReferences tá»« Resources
2. Khi LevelData.Init() Ä‘Æ°á»£c gá»i, FixSpineMaterial() tá»± Ä‘á»™ng cháº¡y
3. FixSpineMaterial() láº¥y shader tá»« ShaderManager
4. Táº¡o material má»›i vá»›i shader Ä‘Ãºng
5. GÃ¡n cho SkeletonGraphic vÃ  rebuild


â“ TROUBLESHOOTING:
-------------------
Q: Váº«n bá»‹ mÃ u tÃ­m sau khi lÃ m theo hÆ°á»›ng dáº«n?
A: 1. Kiá»ƒm tra Console log xem shader cÃ³ Ä‘Æ°á»£c load khÃ´ng
   2. Verify ShaderReferences.asset cÃ³ shader trong list
   3. Rebuild AssetBundle (quan trá»ng!)
   4. XÃ³a cache AssetBundle cÅ©

Q: Console bÃ¡o "KhÃ´ng tÃ¬m tháº¥y shader"?
A: 1. Cháº¡y láº¡i Tools > Shader > Setup ShaderReferences Asset
   2. Cháº¡y Tools > Spine > Add Shaders to Always Included Shaders
   3. Kiá»ƒm tra shader cÃ³ tá»“n táº¡i trong project khÃ´ng

Q: Material váº«n NULL?
A: 1. Kiá»ƒm tra anim (SkeletonGraphic) cÃ³ NULL khÃ´ng
   2. Kiá»ƒm tra ShaderManager.Instance cÃ³ khá»Ÿi táº¡o chÆ°a
   3. Äáº£m báº£o Init() Ä‘Æ°á»£c gá»i sau khi load AssetBundle


ğŸ’¡ TIPS:
--------
- NÃªn setup ShaderReferences ngay tá»« Ä‘áº§u dá»± Ã¡n
- ThÃªm ShaderManager vÃ o scene khá»Ÿi Ä‘á»™ng (hoáº·c Ä‘á»ƒ nÃ³ tá»± táº¡o)
- Kiá»ƒm tra log má»—i láº§n load AssetBundle Ä‘á»ƒ phÃ¡t hiá»‡n lá»—i sá»›m
- Backup AssetBundle trÆ°á»›c khi rebuild


ğŸ“ Há»– TRá»¢:
----------
Náº¿u váº«n gáº·p váº¥n Ä‘á», kiá»ƒm tra:
1. Unity Console Log (cÃ³ log chi tiáº¿t)
2. ShaderReferences.asset cÃ³ Ä‘Ãºng shader khÃ´ng
3. Always Included Shaders trong Project Settings > Graphics

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Created: 2025
Last Updated: 2025-09-30
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
